import{d as st,r as ot,o as at,E as ut,S as lt,C as ct,A as ft,H as pt,V,T as oe,W as ae,M as dt,P as ue,c as ht,a as mt,b as _t,_ as Et}from"./index-oU7MR3OG.js";import{g as he,c as T}from"./_commonjsHelpers-DyVB06ra.js";var me={exports:{}},_e={exports:{}};function yt(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:e===43?62:e===47?63:0}function vt(e,t){for(var i=e.replace(/[^A-Za-z0-9\+\/]/g,""),r=i.length,n=t?Math.ceil((r*3+1>>2)/t)*t:r*3+1>>2,s=new Uint8Array(n),a,o,l=0,c=0,y=0;y<r;y++)if(o=y&3,l|=yt(i.charCodeAt(y))<<18-6*o,o===3||r-y===1){for(a=0;a<3&&c<n;a++,c++)s[c]=l>>>(16>>>a&24)&255;l=0}return s}var gt={decode:vt},St=function(e,t){return new Promise(function(i,r){var n=new XMLHttpRequest;t&&(n.responseType=t),n.open("GET",e),n.onload=function(){n.status===200?i(n.response):r(Error(n.statusText))},n.onerror=function(){r(Error("Network Error"))},n.send()})};(function(e){var t=gt,i=St;function r(_){return function(m){return typeof m=="string"&&_.test(m)}}function n(_,m){return typeof _=="string"?_+m:typeof _=="function"?_(m):m}function s(_,m,v,g){var L=a(m)?o:l(m)?c:y(m)?E:d(m)?f:p(m)?h:S(m)?D:k(m)?$:W(m)?M:null,F=v||{};return L?L(_,m,F):g?Promise.resolve(g):Promise.reject("Source not valid ("+m+")")}s.fetch=i;function a(_){return _ instanceof ArrayBuffer}function o(_,m,v){return new Promise(function(g,L){_.decodeAudioData(m,function(F){g(F)},function(){L("Can't decode audio data ("+m.slice(0,30)+"...)")})})}var l=r(/\.(mp3|wav|ogg)(\?.*)?$/i);function c(_,m,v){var g=n(v.from,m);return s(_,s.fetch(g,"arraybuffer"),v)}function y(_){return _&&typeof _.then=="function"}function E(_,m,v){return m.then(function(g){return s(_,g,v)})}var d=Array.isArray;function f(_,m,v){return Promise.all(m.map(function(g){return s(_,g,v,g)}))}function p(_){return _&&typeof _=="object"}function h(_,m,v){var g={},L=Object.keys(m).map(function(F){if(v.only&&v.only.indexOf(F)===-1)return null;var se=m[F];return s(_,se,v,se).then(function(it){g[F]=it})});return Promise.all(L).then(function(){return g})}var S=r(/\.json(\?.*)?$/i);function D(_,m,v){var g=n(v.from,m);return s(_,s.fetch(g,"text").then(JSON.parse),v)}var k=r(/^data:audio/);function $(_,m,v){var g=m.indexOf(",");return s(_,t.decode(m.slice(g+1)).buffer,v)}var W=r(/\.js(\?.*)?$/i);function M(_,m,v){var g=n(v.from,m);return s(_,s.fetch(g,"text").then(w),v)}function w(_){var m=_.indexOf("MIDI.Soundfont.");if(m<0)throw Error("Invalid MIDI.js Soundfont format");m=_.indexOf("=",m)+2;var v=_.lastIndexOf(",");return JSON.parse(_.slice(m,v)+"}")}e.exports&&(e.exports=s),typeof window<"u"&&(window.loadAudio=s)})(_e);var Nt=_e.exports,Ee={exports:{}},At=Pt;function Pt(e){var t=e.createGain(),i=t._voltage=wt(e),r=I(i),n=I(i),s=I(i);return t._startAmount=I(n),t._endAmount=I(s),t._multiplier=I(r),t._multiplier.connect(t),t._startAmount.connect(t),t._endAmount.connect(t),t.value=r.gain,t.startValue=n.gain,t.endValue=s.gain,t.startValue.value=0,t.endValue.value=0,Object.defineProperties(t,bt),t}var bt={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(e){var t=this._multiplier.gain,i=this._startAmount.gain,r=this._endAmount.gain;this._voltage.start(e),this._decayFrom=this._decayFrom=e+this.attack,this._startedAt=e;var n=this.sustain;t.cancelScheduledValues(e),i.cancelScheduledValues(e),r.cancelScheduledValues(e),r.setValueAtTime(0,e),this.attack?(t.setValueAtTime(0,e),t.linearRampToValueAtTime(1,e+this.attack),i.setValueAtTime(1,e),i.linearRampToValueAtTime(0,e+this.attack)):(t.setValueAtTime(1,e),i.setValueAtTime(0,e)),this.decay&&t.setTargetAtTime(n,this._decayFrom,le(this.decay))}},stop:{value:function(e,t){t&&(e=e-this.release);var i=e+this.release;if(this.release){var r=this._multiplier.gain,n=this._startAmount.gain,s=this._endAmount.gain;r.cancelScheduledValues(e),n.cancelScheduledValues(e),s.cancelScheduledValues(e);var a=le(this.release);if(this.attack&&e<this._decayFrom){var o=Ot(0,1,this._startedAt,this._decayFrom,e);r.linearRampToValueAtTime(o,e),n.linearRampToValueAtTime(1-o,e),n.setTargetAtTime(0,e,a)}s.setTargetAtTime(1,e,a),r.setTargetAtTime(0,e,a)}return this._voltage.stop(i),i}},onended:{get:function(){return this._voltage.onended},set:function(e){this._voltage.onended=e}}},Tt=new Float32Array([1,1]);function wt(e){var t=e.createBufferSource(),i=e.createBuffer(1,2,e.sampleRate);return i.getChannelData(0).set(Tt),t.buffer=i,t.loop=!0,t}function I(e){var t=e.context.createGain();return e.connect(t),t}function le(e){return Math.log(e+1)/Math.log(100)}function Ot(e,t,i,r,n){var s=t-e,a=r-i,o=n-i,l=o/a,c=e+l*s;return c<=e&&(c=e),c>=t&&(c=t),c}var Mt=At,Dt={},Ft={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function Rt(e,t,i){var r=!1,n=0,s={},a=e.createGain();a.gain.value=1;var o=Object.assign({},Ft,i),l={context:e,out:a,opts:o};return t instanceof AudioBuffer?l.buffer=t:l.buffers=t,l.start=function(E,d,f){if(l.buffer&&E!==null)return l.start(null,E,d);var p=E?l.buffers[E]:l.buffer;if(p){if(!r){console.warn("SamplePlayer not connected to any node.");return}}else{console.warn("Buffer "+E+" not found.");return}var h=f||Dt;d=Math.max(e.currentTime,d||0),l.emit("start",d,E,h);var S=y(E,p,h);return S.id=c(E,S),S.env.start(d),S.source.start(d),l.emit("started",d,S.id,S),h.duration&&S.stop(d+h.duration),S},l.play=function(E,d,f){return l.start(E,d,f)},l.stop=function(E,d){var f;return d=d||Object.keys(s),d.map(function(p){return f=s[p],f?(f.stop(E),f.id):null})},l.connect=function(E){return r=!0,a.connect(E),l},l.emit=function(E,d,f,p){l.onevent&&l.onevent(E,d,f,p);var h=l["on"+E];h&&h(d,f,p)},l;function c(E,d){return d.id=n++,s[d.id]=d,d.source.onended=function(){var f=e.currentTime;d.source.disconnect(),d.env.disconnect(),d.disconnect(),l.emit("ended",f,d.id,d)},d.id}function y(E,d,f){var p=e.createGain();return p.gain.value=0,p.connect(a),p.env=Vt(e,f,o),p.env.connect(p.gain),p.source=e.createBufferSource(),p.source.buffer=d,p.source.connect(p),p.source.loop=f.loop||o.loop,p.source.playbackRate.value=It(f.cents||o.cents),p.source.loopStart=f.loopStart||o.loopStart,p.source.loopEnd=f.loopEnd||o.loopEnd,p.stop=function(h){var S=h||e.currentTime;l.emit("stop",S,E);var D=p.env.stop(S);p.source.stop(D)},p}}function ce(e){return typeof e=="number"}var Lt=["attack","decay","sustain","release"];function Vt(e,t,i){var r=Mt(e),n=t.adsr||i.adsr;return Lt.forEach(function(s,a){n?r[s]=n[a]:r[s]=t[s]||i[s]}),r.value.value=ce(t.gain)?t.gain:ce(i.gain)?i.gain:1,r}function It(e){return e?Math.pow(2,e/1200):1}var Ct=Rt,jt=function(e){return e.on=function(t,i){if(arguments.length===1&&typeof t=="function")return e.on("event",t);var r="on"+t,n=e[r];return e[r]=n?xt(n,i):i,e},e};function xt(e,t){return function(i,r,n,s){e(i,r,n,s),t(i,r,n,s)}}var ye=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function kt(){return ye}var Ut=[0,2,4,5,7,9,11];function ve(e,t,i){if(typeof e!="string")return null;var r=ye.exec(e);if(!r||!t&&r[4])return null;var n={letter:r[1].toUpperCase(),acc:r[2].replace(/x/g,"##")};return n.pc=n.letter+n.acc,n.step=(n.letter.charCodeAt(0)+3)%7,n.alt=n.acc[0]==="b"?-n.acc.length:n.acc.length,n.chroma=Ut[n.step]+n.alt,r[3]&&(n.oct=+r[3],n.midi=n.chroma+12*(n.oct+1),n.freq=ge(n.midi,i)),t&&(n.tonicOf=r[4]),n}function ge(e,t){return Math.pow(2,(e-69)/12)*(t||440)}var Se={parse:ve,regex:kt,midiToFreq:ge},Bt=["letter","acc","pc","step","alt","chroma","oct","midi","freq"];Bt.forEach(function(e){Se[e]=function(t){var i=ve(t);return i&&typeof i[e]<"u"?i[e]:null}});var $t=Se,Wt=$t,Jt=function(e){return e!==null&&e!==[]&&e>=0&&e<129},Kt=function(e){return Jt(e)?+e:Wt.midi(e)},qt=function(e){if(e.buffers){var t=e.opts.map,i=typeof t=="function"?t:Kt,r=function(s){return s?i(s)||s:null};e.buffers=Gt(e.buffers,r);var n=e.start;e.start=function(s,a,o){var l=r(s),c=l%1;return c&&(l=Math.floor(l),o=Object.assign(o||{},{cents:Math.floor(c*100)})),n(l,a,o)}}return e};function Gt(e,t){return Object.keys(e).reduce(function(i,r){return i[t(r)]=e[r],i},{})}var zt=Array.isArray,Ht=function(e){return e&&typeof e=="object"},Xt={},Yt=function(e){return e.schedule=function(t,i){var r=e.context.currentTime,n=t<r?r:t;e.emit("schedule",n,i);var s,a,o,l;return i.map(function(c){if(c)zt(c)?(s=c[0],a=c[1]):(s=c.time,a=c);else return null;return Ht(a)?(o=a.name||a.key||a.note||a.midi||null,l=a):(o=a,l=Xt),e.start(o,n+(s||0),l)})},e};function N(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ne={exports:{}};(function(e,t){(function(i){e.exports=i()})(function(){return function i(r,n,s){function a(c,y){if(!n[c]){if(!r[c]){var E=typeof N=="function"&&N;if(!y&&E)return E(c,!0);if(o)return o(c,!0);var d=new Error("Cannot find module '"+c+"'");throw d.code="MODULE_NOT_FOUND",d}var f=n[c]={exports:{}};r[c][0].call(f.exports,function(p){var h=r[c][1][p];return a(h||p)},f,f.exports,i,r,n,s)}return n[c].exports}for(var o=typeof N=="function"&&N,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(i,r,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(s){function a(o){if(this._event=o,this._data=o.data,this.receivedTime=o.receivedTime,this._data&&this._data.length<2){console.warn("Illegal MIDI message of length",this._data.length);return}switch(this._messageCode=o.data[0]&240,this.channel=o.data[0]&15,this._messageCode){case 128:this.messageType="noteoff",this.key=o.data[1]&127,this.velocity=o.data[2]&127;break;case 144:this.messageType="noteon",this.key=o.data[1]&127,this.velocity=o.data[2]&127;break;case 160:this.messageType="keypressure",this.key=o.data[1]&127,this.pressure=o.data[2]&127;break;case 176:this.messageType="controlchange",this.controllerNumber=o.data[1]&127,this.controllerValue=o.data[2]&127,this.controllerNumber===120&&this.controllerValue===0?this.channelModeMessage="allsoundoff":this.controllerNumber===121?this.channelModeMessage="resetallcontrollers":this.controllerNumber===122?this.controllerValue===0?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":this.controllerNumber===123&&this.controllerValue===0?this.channelModeMessage="allnotesoff":this.controllerNumber===124&&this.controllerValue===0?this.channelModeMessage="omnimodeoff":this.controllerNumber===125&&this.controllerValue===0?this.channelModeMessage="omnimodeon":this.controllerNumber===126?this.channelModeMessage="monomodeon":this.controllerNumber===127&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=o.data[1];break;case 208:this.messageType="channelpressure",this.pressure=o.data[1]&127;break;case 224:this.messageType="pitchbendchange";var l=o.data[2]&127,c=o.data[1]&127;this.pitchBend=(l<<8)+c;break}}return new a(s)},r.exports=n.default},{}]},{},[1])(1)})})(Ne);var Qt=Ne.exports,Zt=Qt,en=function(e){return e.listenToMidi=function(t,i){var r={},n=i||{},s=n.gain||function(a){return a/127};return t.onmidimessage=function(a){var o=a.messageType?a:Zt(a);if(o.messageType==="noteon"&&o.velocity===0&&(o.messageType="noteoff"),!(n.channel&&o.channel!==n.channel))switch(o.messageType){case"noteon":r[o.key]=e.play(o.key,0,{gain:s(o.velocity)});break;case"noteoff":r[o.key]&&(r[o.key].stop(),delete r[o.key]);break}},e},e};(function(e){var t=Ct,i=jt,r=qt,n=Yt,s=en;function a(o,l,c){return s(n(r(i(t(o,l,c)))))}e.exports&&(e.exports=a),typeof window<"u"&&(window.SamplePlayer=a)})(Ee);var tn=Ee.exports;function fe(e,t){return Array(t+1).join(e)}function Y(e){return typeof e=="number"}function nn(e){return typeof e=="string"}function rn(e){return typeof e<"u"}function Ae(e,t){return Math.pow(2,(e-69)/12)*(t||440)}var Pe=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function sn(){return Pe}var on=[0,2,4,5,7,9,11];function O(e,t,i){if(typeof e!="string")return null;var r=Pe.exec(e);if(!r||!t&&r[4])return null;var n={letter:r[1].toUpperCase(),acc:r[2].replace(/x/g,"##")};n.pc=n.letter+n.acc,n.step=(n.letter.charCodeAt(0)+3)%7,n.alt=n.acc[0]==="b"?-n.acc.length:n.acc.length;var s=on[n.step]+n.alt;return n.chroma=s<0?12+s:s%12,r[3]&&(n.oct=+r[3],n.midi=s+12*(n.oct+1),n.freq=Ae(n.midi,i)),t&&(n.tonicOf=r[4]),n}var an="CDEFGAB";function un(e){return Y(e)?e<0?fe("b",-e):fe("#",e):""}function ln(e){return Y(e)?""+e:""}function be(e,t,i){return e===null||typeof e>"u"?null:e.step?be(e.step,e.alt,e.oct):e<0||e>6?null:an.charAt(e)+un(t)+ln(i)}function Te(e){if((Y(e)||nn(e))&&e>=0&&e<128)return+e;var t=O(e);return t&&rn(t.midi)?t.midi:null}function cn(e,t){var i=Te(e);return i===null?null:Ae(i,t)}function fn(e){return(O(e)||{}).letter}function pn(e){return(O(e)||{}).acc}function dn(e){return(O(e)||{}).pc}function hn(e){return(O(e)||{}).step}function mn(e){return(O(e)||{}).alt}function _n(e){return(O(e)||{}).chroma}function En(e){return(O(e)||{}).oct}const yn=Object.freeze(Object.defineProperty({__proto__:null,acc:pn,alt:mn,build:be,chroma:_n,freq:cn,letter:fn,midi:Te,oct:En,parse:O,pc:dn,regex:sn,step:hn},Symbol.toStringTag,{value:"Module"})),vn=he(yn);var J,pe;function gn(){if(pe)return J;pe=1;var e=vn;function t(n,s){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof t))return new t(n);this.nameToUrl=s||t.nameToUrl,this.ctx=n,this.instruments={},this.promises=[]}t.prototype.onready=function(n){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(n)},t.prototype.instrument=function(n,s){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var a=this.ctx;if(n=n||"default",n in this.instruments)return this.instruments[n];var o={name:n,play:r(a,s)};if(this.instruments[n]=o,n!=="default"){var l=t.instrument(a,n,s).then(function(c){return o.play=c.play,o});this.promises.push(l),o.onready=function(c){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),l.then(c)}}else o.onready=function(c){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),c()};return o};function i(n,s,a){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),t.instrument(n,s,a).then(function(o){return o.buffers})}t.loadBuffers=i;function r(n,s){return s=s||{},function(a,o,l,c){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var y=a>0&&a<129?+a:e.midi(a),E=y?e.midiToFreq(y,440):null;if(E){l=l||.2,c=c||{};var d=c.destination||s.destination||n.destination,f=c.vcoType||s.vcoType||"sine",p=c.gain||s.gain||.4,h=n.createOscillator();h.type=f,h.frequency.value=E;var S=n.createGain();return S.gain.value=p,h.connect(S),S.connect(d),h.start(o),l>0&&h.stop(o+l),h}}}return t.noteToMidi=e.midi,J=t,J}(function(e){var t=Nt,i=tn;function r(o,l,c){if(arguments.length===1)return function(p,h){return r(o,p,h)};var y=c||{},E=y.isSoundfontURL||n,d=y.nameToUrl||s,f=E(l)?l:d(l,y.soundfont,y.format);return t(o,f,{only:y.only||y.notes}).then(function(p){var h=i(o,p,y).connect(y.destination?y.destination:o.destination);return h.url=f,h.name=l,h})}function n(o){return/\.js(\?.*)?$/i.test(o)}function s(o,l,c){return c=c==="ogg"?c:"mp3",l=l==="FluidR3_GM"?l:"MusyngKite","https://gleitz.github.io/midi-js-soundfonts/"+l+"/"+o+"-"+c+".js"}var a=gn();a.instrument=r,a.nameToUrl=s,e.exports&&(e.exports=a),typeof window<"u"&&(window.Soundfont=a)})(me);var Sn=me.exports,A={};const Nn={},An=Object.freeze(Object.defineProperty({__proto__:null,default:Nn},Symbol.toStringTag,{value:"Module"})),Q=he(An);var u={};Object.defineProperty(u,"__esModule",{value:!0});u.isNodeWithName=u.isNormalClassPropertyDefinitionWithAnonymousExpressionAssigned=u.isNormalObjectPropertyWithAnonymousExpressionAssigned=u.isNormalVariableDeclaratorWithAnonymousExpressionAssigned=u.isNormalAssignmentPatternWithAnonymousExpressionAssigned=u.isNormalVariableDeclarator=u.isNormalObjectProperty=u.isNormalMethodDefinition=u.isNormalClassPropertyDefinition=u.isNormalAssignmentPattern=u.isNormalAnonymousExpression=u.isFunctionExpressionWithName=u.isClassExpressionWithName=u.isStringLiteral=u.isPropertyNameNonComputed=u.isNumberLiteral=u.isFunctionDeclarationWithName=u.isClassPropertyNameNonComputed=u.isClassDeclarationWithName=u.isVariableDeclarator=u.isTSTypeAliasDeclaration=u.isTSQualifiedName=u.isTSModuleDeclaration=u.isTSInterfaceDeclaration=u.isTSEnumDeclaration=u.isPropertyDefinition=u.isProperty=u.isPrivateIdentifier=u.isObjectExpression=u.isMethodDefinition=u.isLiteral=u.isIdentifier=u.isFunctionExpression=u.isFunctionDeclaration=u.isExpression=u.isExportDefaultDeclaration=u.isClassExpression=u.isClassDeclaration=u.isAssignmentPattern=u.isArrowFunctionExpression=u.isArrayExpression=void 0;function Pn(e){return e.type==="ArrayExpression"}u.isArrayExpression=Pn;function we(e){return e.type==="ArrowFunctionExpression"}u.isArrowFunctionExpression=we;function Oe(e){return e.type==="AssignmentPattern"}u.isAssignmentPattern=Oe;function Me(e){return e.type==="ClassDeclaration"}u.isClassDeclaration=Me;function Z(e){return e.type==="ClassExpression"}u.isClassExpression=Z;function bn(e){return e.type==="ExportDefaultDeclaration"}u.isExportDefaultDeclaration=bn;function Tn(e){return e.type.includes("Expression")}u.isExpression=Tn;function De(e){return e.type==="FunctionDeclaration"}u.isFunctionDeclaration=De;function ee(e){return e.type==="FunctionExpression"}u.isFunctionExpression=ee;function R(e){return e.type==="Identifier"}u.isIdentifier=R;function te(e){return e.type==="Literal"}u.isLiteral=te;function Fe(e){return e.type==="MethodDefinition"}u.isMethodDefinition=Fe;function Re(e){return e.type==="ObjectExpression"}u.isObjectExpression=Re;function j(e){return e.type==="PrivateIdentifier"}u.isPrivateIdentifier=j;function Le(e){return e.type==="Property"}u.isProperty=Le;function Ve(e){return e.type==="PropertyDefinition"}u.isPropertyDefinition=Ve;function Ie(e){return e.type==="TSEnumDeclaration"}u.isTSEnumDeclaration=Ie;function Ce(e){return e.type==="TSInterfaceDeclaration"}u.isTSInterfaceDeclaration=Ce;function wn(e){return e.type==="TSModuleDeclaration"}u.isTSModuleDeclaration=wn;function On(e){return e.type==="TSQualifiedName"}u.isTSQualifiedName=On;function je(e){return e.type==="TSTypeAliasDeclaration"}u.isTSTypeAliasDeclaration=je;function xe(e){return e.type==="VariableDeclarator"}u.isVariableDeclarator=xe;function ke(e){return Me(e)&&e.id!==null}u.isClassDeclarationWithName=ke;function Mn(e){return j(e)||$e(e)}u.isClassPropertyNameNonComputed=Mn;function Ue(e){return De(e)&&e.id!==null}u.isFunctionDeclarationWithName=Ue;function Be(e){return te(e)&&typeof e.value=="number"}u.isNumberLiteral=Be;function $e(e){return R(e)||Be(e)||We(e)}u.isPropertyNameNonComputed=$e;function We(e){return te(e)&&typeof e.value=="string"}u.isStringLiteral=We;function Je(e){return Z(e)&&e.id!==null}u.isClassExpressionWithName=Je;function Ke(e){return ee(e)&&e.id!==null}u.isFunctionExpressionWithName=Ke;function x(e){return[we,Z,ee,Re].some(i=>i(e))}u.isNormalAnonymousExpression=x;function qe(e){return Oe(e)&&R(e.left)}u.isNormalAssignmentPattern=qe;function Ge(e){return Ve(e)&&(R(e.key)||j(e.key))&&e.value!==null}u.isNormalClassPropertyDefinition=Ge;function ze(e){return Fe(e)&&(R(e.key)||j(e.key))}u.isNormalMethodDefinition=ze;function He(e){return Le(e)&&(R(e.key)||j(e.key))}u.isNormalObjectProperty=He;function Xe(e){return xe(e)&&R(e.id)&&e.init!==null}u.isNormalVariableDeclarator=Xe;function Ye(e){return qe(e)&&x(e.right)}u.isNormalAssignmentPatternWithAnonymousExpressionAssigned=Ye;function Qe(e){return Xe(e)&&x(e.init)}u.isNormalVariableDeclaratorWithAnonymousExpressionAssigned=Qe;function Ze(e){return He(e)&&x(e.value)}u.isNormalObjectPropertyWithAnonymousExpressionAssigned=Ze;function et(e){return Ge(e)&&x(e.value)}u.isNormalClassPropertyDefinitionWithAnonymousExpressionAssigned=et;function Dn(e){return ke(e)||Ue(e)||Je(e)||Ke(e)||Qe(e)||Ze(e)||et(e)||Ye(e)||ze(e)||Ie(e)||Ce(e)||je(e)}u.isNodeWithName=Dn;var U={exports:{}};U.exports;(function(e,t){var i=T&&T.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(t,"__esModule",{value:!0}),t.isModuleResolutionError=t.ESLINT_MAJOR_VERSION=t.Naming=t.ModuleResolver=t.configArrayFactory=t.eslintFolder=t.eslintPackageVersion=void 0;const r=i(Q),n=f=>typeof f=="object"&&!!f&&"code"in f&&f.code==="MODULE_NOT_FOUND";t.isModuleResolutionError=n;let s,a,o,l,c;t.eslintFolder=c;for(let f=e;;){if(s)try{const p=r.default.dirname(require.resolve("eslint/package.json",{paths:[f.path]}));if(f.filename.startsWith(p+r.default.sep)){t.eslintFolder=c=p;break}}catch(p){if(!n(p))throw p}else if(f.filename.endsWith("eslintrc.cjs"))try{const p=r.default.dirname(require.resolve("@eslint/eslintrc/package.json",{paths:[f.path]})),h=r.default.join(p,"dist/eslintrc.cjs");h===f.filename&&(s=h)}catch(p){if(!n(p))throw p}if(!f.parent)break;f=f.parent}if(!c)for(let f=e;;){if(a){if(f.filename.endsWith("cli-engine.js"))try{const p=r.default.dirname(require.resolve("eslint/package.json",{paths:[f.path]}));if(r.default.join(p,"lib/cli-engine/cli-engine.js")===f.filename){t.eslintFolder=c=p;break}}catch(p){if(!n(p))throw p}}else try{const p=r.default.dirname(require.resolve("@eslint/eslintrc/package.json",{paths:[f.path]})),h=r.default.join(p,"/lib/config-array-factory.js");h===f.filename&&(a=h,o=`${p}/lib/shared/relative-module-resolver`,l=`${p}/lib/shared/naming`)}catch(p){if(!n(p))throw p}if(!f.parent)break;f=f.parent}if(!c)for(let f=e;;){if(/[\\/]eslint[\\/]lib[\\/]cli-engine[\\/]config-array-factory\.js$/i.test(f.filename)){t.eslintFolder=c=r.default.join(r.default.dirname(f.filename),"../.."),a=`${c}/lib/cli-engine/config-array-factory`,o=`${c}/lib/shared/relative-module-resolver`;let p;try{p=r.default.dirname(require.resolve("@eslint/eslintrc/package.json",{paths:[f.path]}))}catch(h){if(!n(h))throw h}l=`${p??c}/lib/shared/naming`;break}if(!f.parent)throw new Error(`Failed to patch ESLint because the calling module was not recognized.
If you are using a newer ESLint version that may be unsupported, please create a GitHub issue:
https://github.com/microsoft/rushstack/issues`);f=f.parent}const y=`${c}/package.json`,E=N(y);t.eslintPackageVersion=E.version;const d=parseInt(t.eslintPackageVersion,10);if(t.ESLINT_MAJOR_VERSION=d,isNaN(d))throw new Error(`Unable to parse ESLint version "${t.eslintPackageVersion}" in file "${y}"`);if(!(d>=6&&d<=9))throw new Error(`The ESLint patch script has only been tested with ESLint version 6.x, 7.x, 8.x, and 9.x. (Your version: ${t.eslintPackageVersion})
Consider reporting a GitHub issue:
https://github.com/microsoft/rushstack/issues`);d>=8?t.configArrayFactory=N(s).Legacy.ConfigArrayFactory:t.configArrayFactory=N(a).ConfigArrayFactory,d>=8?(t.ModuleResolver=N(s).Legacy.ModuleResolver,t.Naming=N(s).Legacy.naming):(t.ModuleResolver=N(o),t.Naming=N(l))})(U,U.exports);var Fn=U.exports,ne={};(function(e){var t={},i;Object.defineProperty(e,"__esModule",{value:!0}),e.BULK_SUPPRESSIONS_CLI_ESLINT_PACKAGE_NAME=e.ESLINT_PACKAGE_NAME_ENV_VAR_NAME=e.VSCODE_PID_ENV_VAR_NAME=e.ESLINT_BULK_FORCE_REGENERATE_PATCH_ENV_VAR_NAME=e.ESLINT_BULK_DETECT_ENV_VAR_NAME=e.ESLINT_BULK_PRUNE_ENV_VAR_NAME=e.ESLINT_BULK_ENABLE_ENV_VAR_NAME=e.ESLINT_BULK_SUPPRESS_ENV_VAR_NAME=e.ESLINT_BULK_PATCH_PATH_ENV_VAR_NAME=void 0,e.ESLINT_BULK_PATCH_PATH_ENV_VAR_NAME="RUSHSTACK_ESLINT_BULK_PATCH_PATH",e.ESLINT_BULK_SUPPRESS_ENV_VAR_NAME="RUSHSTACK_ESLINT_BULK_SUPPRESS",e.ESLINT_BULK_ENABLE_ENV_VAR_NAME="ESLINT_BULK_ENABLE",e.ESLINT_BULK_PRUNE_ENV_VAR_NAME="ESLINT_BULK_PRUNE",e.ESLINT_BULK_DETECT_ENV_VAR_NAME="_RUSHSTACK_ESLINT_BULK_DETECT",e.ESLINT_BULK_FORCE_REGENERATE_PATCH_ENV_VAR_NAME="RUSHSTACK_ESLINT_BULK_FORCE_REGENERATE_PATCH",e.VSCODE_PID_ENV_VAR_NAME="VSCODE_PID",e.ESLINT_PACKAGE_NAME_ENV_VAR_NAME="_RUSHSTACK_ESLINT_PACKAGE_NAME",e.BULK_SUPPRESSIONS_CLI_ESLINT_PACKAGE_NAME=(i=t[e.ESLINT_PACKAGE_NAME_ENV_VAR_NAME])!==null&&i!==void 0?i:"eslint"})(ne);var b={},Rn={},Ln=T&&T.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(b,"__esModule",{value:!0});b.serializeSuppression=b.deleteBulkSuppressionsFileInEslintrcFolder=b.writeSuppressionsJsonToFile=b.getAllBulkSuppressionsConfigsByEslintrcFolderPath=b.getSuppressionsConfigForEslintrcFolderPath=void 0;const re=Ln(Q),Vn=ne,In=Rn[Vn.VSCODE_PID_ENV_VAR_NAME]!==void 0,Cn=10*1e3,ie=".eslint-bulk-suppressions.json";function tt(e){if((e==null?void 0:e.code)!=="ENOENT")throw e}const B=new Map;function jn(e){const t=B.get(e);let i,r;if(t?(i=In&&t.readTime<Date.now()-Cn,r=t.suppressionsConfig):i=!0,i){const n=`${e}/${ie}`;let s;try{s=re.default.readFileSync(n).toString()}catch(a){tt(a)}if(!s)r={serializedSuppressions:new Set,jsonObject:{suppressions:[]},newSerializedSuppressions:new Set,newJsonObject:{suppressions:[]}};else{const a=JSON.parse(s);$n(a);const o=new Set;for(const l of a.suppressions)o.add(rt(l));r={serializedSuppressions:o,jsonObject:a,newSerializedSuppressions:new Set,newJsonObject:{suppressions:[]}}}B.set(e,{readTime:Date.now(),suppressionsConfig:r})}return r}b.getSuppressionsConfigForEslintrcFolderPath=jn;function xn(){const e=[];for(const[t,{suppressionsConfig:i}]of B)e.push([t,i]);return e}b.getAllBulkSuppressionsConfigsByEslintrcFolderPath=xn;function kn(e,t){B.set(e,{readTime:Date.now(),suppressionsConfig:t});const i=`${e}/${ie}`;t.jsonObject.suppressions.length===0?nt(i):(t.jsonObject.suppressions.sort(Bn),re.default.writeFileSync(i,JSON.stringify(t.jsonObject,void 0,2)))}b.writeSuppressionsJsonToFile=kn;function Un(e){const t=`${e}/${ie}`;nt(t)}b.deleteBulkSuppressionsFileInEslintrcFolder=Un;function nt(e){try{re.default.unlinkSync(e)}catch(t){tt(t)}}function rt({file:e,scopeId:t,rule:i}){return`${e}|${t}|${i}`}b.serializeSuppression=rt;function Bn(e,t){return e.file<t.file?-1:e.file>t.file?1:e.scopeId<t.scopeId?-1:e.scopeId>t.scopeId?1:e.rule<t.rule?-1:e.rule>t.rule?1:0}function $n(e){if(typeof e!="object")throw new Error(`Invalid JSON object: ${JSON.stringify(e,null,2)}`);if(!e)throw new Error("JSON object is null.");const t=new Set(["suppressions"]);for(const n of Object.getOwnPropertyNames(e))if(!t.has(n))throw new Error(`Unexpected property name: ${n}`);const{suppressions:i}=e;if(!i)throw new Error('Missing "suppressions" property.');if(!Array.isArray(i))throw new Error('"suppressions" property is not an array.');const r=new Set(["file","scopeId","rule"]);for(const n of i){if(typeof n!="object")throw new Error(`Invalid suppression: ${JSON.stringify(n,null,2)}`);if(!n)throw new Error(`Suppression is null: ${JSON.stringify(n,null,2)}`);for(const s of Object.getOwnPropertyNames(n))if(!r.has(s))throw new Error(`Unexpected property name: ${s}`);for(const s of r)if(n.hasOwnProperty(s)){if(typeof n[s]!="string")throw new Error(`"${s}" property in suppression is not a string: ${JSON.stringify(n,null,2)}`)}else throw new Error(`Missing "${s}" property in suppression: ${JSON.stringify(n,null,2)}`)}return!0}var G={},Wn=T&&T.__createBinding||(Object.create?function(e,t,i,r){r===void 0&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){r===void 0&&(r=i),e[r]=t[i]}),Jn=T&&T.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Kn=T&&T.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)&&Wn(t,e,i);return Jn(t,e),t},qn=T&&T.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(A,"__esModule",{value:!0});A.extendVerifyFunction=A.patchClass=A.requireFromPathToLinterJS=A.write=A.prune=A.shouldBulkSuppress=void 0;const Gn=qn(Q),P=Kn(u),de=Fn,z=ne,C=b,zn=[".eslintrc.js",".eslintrc.cjs"],H=Symbol("suppression"),X=G[z.ESLINT_BULK_SUPPRESS_ENV_VAR_NAME],Hn=X==="*",K=X?new Set(X.split(",")):void 0;function Xn(e){if(P.isClassDeclarationWithName(e))return e.id.name;if(P.isFunctionDeclarationWithName(e))return e.id.name;if(P.isClassExpressionWithName(e))return e.id.name;if(P.isFunctionExpressionWithName(e))return e.id.name;if(P.isNormalVariableDeclaratorWithAnonymousExpressionAssigned(e))return e.id.name;if(P.isNormalObjectPropertyWithAnonymousExpressionAssigned(e))return e.key.name;if(P.isNormalClassPropertyDefinitionWithAnonymousExpressionAssigned(e))return e.key.name;if(P.isNormalAssignmentPatternWithAnonymousExpressionAssigned(e))return e.left.name;if(P.isNormalMethodDefinition(e))return e.key.name;if(P.isTSEnumDeclaration(e))return e.id.name;if(P.isTSInterfaceDeclaration(e))return e.id.name;if(P.isTSTypeAliasDeclaration(e))return e.id.name}function Yn(e){const t=[];for(let i=e;i;i=i.parent){const r=Xn(i);r!==void 0&&t.unshift(r)}return t.length===0?".":"."+t.join(".")}const q=new Map;function Qn(e){const t=q.get(e);if(t)return t;const i=e.substring(0,e.lastIndexOf("/")),r=[e];let n;e:for(let s=i;s;s=s.substring(0,s.lastIndexOf("/"))){const a=q.get(s);if(a)return a;r.push(s);for(const o of zn)if(Gn.default.existsSync(`${s}/${o}`)){n=s;break e}}if(n){for(const s of r)q.set(s,n);return n}else throw new Error(`Cannot locate an ESLint configuration file for ${e}`)}function Zn(e){if(G[z.ESLINT_BULK_ENABLE_ENV_VAR_NAME]==="false")return!1;const{filename:t,currentNode:i,ruleId:r,problem:n}=e,s=t.replace(/\\/g,"/"),a=Qn(s),o=s.substring(a.length+1),l=Yn(i),c={file:o,scopeId:l,rule:r},y=(0,C.getSuppressionsConfigForEslintrcFolderPath)(a),E=(0,C.serializeSuppression)(c),d=y.serializedSuppressions.has(E);return(d||Hn||K!=null&&K.has(c.rule))&&(n[H]={suppression:c,serializedSuppression:E,config:y}),G[z.ESLINT_BULK_PRUNE_ENV_VAR_NAME]!=="1"&&d}A.shouldBulkSuppress=Zn;function er(){for(const[e,t]of(0,C.getAllBulkSuppressionsConfigsByEslintrcFolderPath)())if(t){const{newSerializedSuppressions:i,newJsonObject:r}=t,n={serializedSuppressions:i,jsonObject:r,newSerializedSuppressions:new Set,newJsonObject:{suppressions:[]}};(0,C.writeSuppressionsJsonToFile)(e,n)}}A.prune=er;function tr(){for(const[e,t]of(0,C.getAllBulkSuppressionsConfigsByEslintrcFolderPath)())t&&(0,C.writeSuppressionsJsonToFile)(e,t)}A.write=tr;function nr(e){if(!de.eslintFolder)return N(e);const t=`${de.eslintFolder}/lib/linter`,i=require.resolve(e,{paths:[t]});return N(i)}A.requireFromPathToLinterJS=nr;function rr(e,t){const i=Object.getOwnPropertyNames(t.prototype);for(const r of i)e.prototype[r]=t.prototype[r];for(const[r,n]of Object.entries(Object.getOwnPropertyDescriptors(t.prototype)))(n.get||n.set)&&Object.defineProperty(e.prototype,r,n)}A.patchClass=rr;function ir(e){return function(...t){const i=e.apply(this,t);if(i){for(const r of i)if(r[H]){const{serializedSuppression:n,suppression:s,config:{newSerializedSuppressions:a,jsonObject:{suppressions:o},newJsonObject:{suppressions:l}}}=r[H];a.has(n)||(a.add(n),l.push(s),o.push(s))}}return i}}A.extendVerifyFunction=ir;const sr=st({__name:"PianoView",setup(e){const t=ot();at(async()=>{const n=new ut(t.value,!0),s=await r(n);n.runRenderLoop(()=>{s.render()}),window.addEventListener("resize",()=>{n.resize()})});const i=function(n,s,a){const o=a/n.scaling.x,l=a/n.scaling.y,c=a/n.scaling.z;n.scaling=new V(o,l,c),n.position=new V(s.x+o*(n.position.x-s.x),s.y+l*(n.position.y-s.y),s.z+c*(n.position.z-s.z))},r=async n=>{const a=new lt(n);a.clearColor=new ct(0,0,0);const o=3*Math.PI/2,l=Math.PI/50,c=220,y=new V(0,0,0);new ft("Camera",o,l,c,y).attachControl(t.value,!0);const d=new pt("light",new V(1,1,0));d.intensity=.6;const f=new oe("keyboard"),p=new oe("piano");f.parent=p,f.position.y+=80,i(p,new V(0,0,0),.015);const h=new Map;return a.createDefaultXRExperienceAsync().then(async D=>{console.log("Done, WebXR is enabled");const k=D.baseExperience.featuresManager;k.enableFeature(ae.POINTER_SELECTION,"stable",{xrInput:D.input,enablePointerSelectionOnAllControllers:!0});const $=dt.CreateGround("ground",{width:400,height:400});k.enableFeature(ae.TELEPORTATION,"stable",{xrInput:D.input,floorMeshes:[$],snapPositions:[new V(2.4*3.5*.015,0,-10*.015)]});const W=await Sn.instrument(new AudioContext,"acoustic_grand_piano");return a.onPointerObservable.add(M=>{switch(M.type){case ue.POINTERDOWN:if(M.pickInfo.hit){let w=M.pickInfo.pickedMesh,_=M.event.pointerId;w.parent===f&&(w.position.y-=.5,h.set(_,{mesh:w,note:W.play(M.pickInfo.pickedMesh.name)}))}break;case ue.POINTERUP:{let w=M.event.pointerId;h.has(w)&&(h.get(w).mesh.position.y+=.5,h.get(w).note.stop(),h.delete(w));break}}}),a})};return(n,s)=>(_t(),ht("div",null,[mt("canvas",{ref_key:"canvas",ref:t,id:"renderCanvas"},null,512)]))}}),ur=Et(sr,[["__scopeId","data-v-a4e7966a"]]);export{ur as default};
